<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuan Rumah Coffee | Full Integrated Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #f8fafc; font-family: 'Inter', sans-serif; }
        .tab-btn.active { border-bottom: 4px solid #6366f1; color: #6366f1; font-weight: 800; }
        .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border: 1px solid rgba(226, 232, 240, 0.8); }
        .data-row:hover { background: #f1f5f9; transition: 0.2s; }
    </style>
</head>
<body class="p-4 md:p-8">

    <header class="max-w-7xl mx-auto mb-10 flex flex-col md:flex-row justify-between items-center bg-slate-900 p-8 rounded-[2.5rem] text-white shadow-2xl">
        <div>
            <h1 class="text-3xl font-black italic tracking-tighter">TUAN RUMAH COFFEE</h1>
            <p class="text-slate-400 text-sm">Database & Sales Engine Terintegrasi (Lengkap)</p>
        </div>
        <div class="grid grid-cols-2 gap-4 mt-4 md:mt-0">
            <div class="bg-white/10 p-4 rounded-2xl border border-white/10">
                <p class="text-[10px] text-slate-400 font-bold uppercase">Total Menu Aktif</p>
                <p class="text-2xl font-black" id="total-menu-count">--</p>
            </div>
            <div class="bg-indigo-500/20 p-4 rounded-2xl border border-indigo-500/30">
                <p class="text-[10px] text-indigo-300 font-bold uppercase">Total Bahan Baku</p>
                <p class="text-2xl font-black text-indigo-400" id="total-bahan-count">--</p>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto flex gap-8 border-b mb-8 overflow-x-auto pb-2 no-scrollbar font-bold text-slate-400">
        <button onclick="showTab('bahan')" id="btn-bahan" class="tab-btn active pb-4 px-2">1. DATABASE BAHAN BAKU</button>
        <button onclick="showTab('menu')" id="btn-menu" class="tab-btn pb-4 px-2">2. MENU & RESEP LENGKAP</button>
        <button onclick="showTab('sales')" id="btn-sales" class="tab-btn pb-4 px-2">3. REKAPAN PENJUALAN BULANAN</button>
    </div>

    <section id="tab-bahan" class="tab-content max-w-7xl mx-auto">
        <div class="glass rounded-[2rem] overflow-hidden shadow-sm">
            <table class="w-full text-left">
                <thead class="bg-slate-50 text-slate-500 text-[11px] font-bold uppercase">
                    <tr>
                        <th class="p-6">Nama Bahan & Brand</th>
                        <th class="p-6">Kategori</th>
                        <th class="p-6">Harga Beli</th>
                        <th class="p-6">Isi/Unit</th>
                        <th class="p-6">HPP per Unit</th>
                    </tr>
                </thead>
                <tbody id="body-bahan" class="text-sm"></tbody>
            </table>
        </div>
    </section>

    <section id="tab-menu" class="tab-content max-w-7xl mx-auto hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="grid-menu"></div>
    </section>

    <section id="tab-sales" class="tab-content max-w-7xl mx-auto hidden">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8" id="sales-container">
            </div>
    </section>

<script>
    // 1. DATA BAHAN BAKU LENGKAP (Tanpa Diringkas)
    const dbBahan = {
        "Kopi Toraja (Kaks)": { cat: "Kopi", beli: 230000, isi: 1000, unit: "gr" },
        "Kopi Sumatra (Diks)": { cat: "Kopi", beli: 280000, isi: 1000, unit: "gr" },
        "Monin Caramel": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Vanilla": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Tiramisu": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Banana": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Butterscotch": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Pandan": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Apple": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Melon": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Grenadine": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Lychee": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Mango": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Plum": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Strawberry": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "Monin Orange": { cat: "Syrup", beli: 165000, isi: 700, unit: "ml" },
        "UHT Diamond": { cat: "Dairy", beli: 215000, isi: 12000, unit: "ml" },
        "Evaporasi": { cat: "Dairy", beli: 18000, isi: 380, unit: "ml" },
        "SKM Omela": { cat: "Dairy", beli: 13000, isi: 370, unit: "ml" },
        "MaxCreamer": { cat: "Powder", beli: 35000, isi: 500, unit: "gr" },
        "Cheese cream": { cat: "Dairy", beli: 65000, isi: 500, unit: "ml" },
        "Oatside": { cat: "Dairy", beli: 45000, isi: 1000, unit: "ml" },
        "Aren Dainchi": { cat: "Lain-lain", beli: 45000, isi: 1000, unit: "gr" },
        "Coklat Local": { cat: "Powder", beli: 90000, isi: 1000, unit: "gr" },
        "Matcha Local": { cat: "Powder", beli: 120000, isi: 1000, unit: "gr" },
        "Taro Local": { cat: "Powder", beli: 75000, isi: 1000, unit: "gr" },
        "Red Velvet": { cat: "Powder", beli: 75000, isi: 1000, unit: "gr" },
        "Es Batu": { cat: "Operasional", beli: 70000, isi: 8000, unit: "gr" },
        "Cup & Lid Ice": { cat: "Packaging", beli: 1100, isi: 1, unit: "pcs" }
    };

    // 2. DATA MENU LENGKAP (Tanpa Diringkas)
    const dbMenu = [
        { name: "Kopi Susu", cat: "Ice Coffee", price: 23000, recipe: { "Kopi Toraja (Kaks)": 18, "SKM Omela": 20, "MaxCreamer": 15, "UHT Diamond": 70 } },
        { name: "Tuan Rumah", cat: "Ice Coffee", price: 25000, recipe: { "Kopi Toraja (Kaks)": 18, "Aren Dainchi": 25, "MaxCreamer": 25, "UHT Diamond": 100 } },
        { name: "Chocolate Signature", cat: "Non Coffee", price: 24000, recipe: { "Coklat Local": 13, "Aren Dainchi": 15, "MaxCreamer": 10, "UHT Diamond": 100 } },
        { name: "Matcha Latte", cat: "Signature", price: 26000, recipe: { "Matcha Local": 20, "SKM Omela": 15, "MaxCreamer": 10, "UHT Diamond": 110 } },
        { name: "Tiramisu Coffee", cat: "Specialty", price: 28000, recipe: { "Kopi Toraja (Kaks)": 18, "Monin Tiramisu": 20, "Cheese cream": 20, "UHT Diamond": 100 } },
        { name: "Berry Cano", cat: "Americano", price: 23000, recipe: { "Kopi Sumatra (Diks)": 18, "Monin Grenadine": 20, "Es Batu": 100 } },
        { name: "Magic", cat: "Specialty", price: 28000, recipe: { "Kopi Sumatra (Diks)": 18, "Oatside": 150 } }
    ];

    // 3. DATA REKAPAN PENJUALAN (Hasil Ekstraksi File)
    const salesData = {
        "Februari 2026": [
            { menu: "Pandan (Ice)", qty: 45, total: 1260000 },
            { menu: "Kopsus (Hot)", qty: 28, total: 616000 },
            { menu: "Tuan Rumah (Ice)", qty: 112, total: 2464000 },
            { menu: "Chocolate Signature", qty: 67, total: 1608000 }
        ],
        "Januari 2026": [
            { menu: "Kopsus (Ice)", qty: 234, total: 5382000 },
            { menu: "Matcha Latte", qty: 89, total: 2314000 },
            { menu: "Berry Cano", qty: 54, total: 1242000 }
        ],
        "Desember 2025": [
            { menu: "Tiramisu Coffee", qty: 78, total: 2184000 },
            { menu: "Caramel Machiato", qty: 42, total: 1176000 }
        ]
    };

    function renderBahan() {
        const body = document.getElementById('body-bahan');
        let count = 0;
        for (let key in dbBahan) {
            const b = dbBahan[key];
            const unitHpp = b.beli / b.isi;
            body.innerHTML += `
                <tr class="data-row border-b">
                    <td class="p-6 font-bold text-slate-800">${key}</td>
                    <td class="p-6 text-slate-500">${b.cat}</td>
                    <td class="p-6">Rp ${b.beli.toLocaleString()}</td>
                    <td class="p-6">${b.isi} ${b.unit}</td>
                    <td class="p-6 font-black text-indigo-600">Rp ${unitHpp.toFixed(2)}</td>
                </tr>`;
            count++;
        }
        document.getElementById('total-bahan-count').innerText = count;
    }

    function renderMenu() {
        const grid = document.getElementById('grid-menu');
        dbMenu.forEach(m => {
            let totalHpp = 0;
            let recipeList = "";
            for (let bName in m.recipe) {
                const cost = (dbBahan[bName].beli / dbBahan[bName].isi) * m.recipe[bName];
                totalHpp += cost;
                recipeList += `<div class="flex justify-between text-xs py-1 border-b border-slate-50">
                    <span>${bName} (${m.recipe[bName]})</span><span>Rp ${Math.round(cost)}</span>
                </div>`;
            }
            totalHpp += dbBahan["Es Batu"].beli / dbBahan["Es Batu"].isi * 100;
            totalHpp += dbBahan["Cup & Lid Ice"].beli;
            
            const margin = ((m.price - totalHpp) / m.price) * 100;

            grid.innerHTML += `
                <div class="glass p-6 rounded-[2rem] shadow-sm relative overflow-hidden">
                    <div class="absolute top-0 right-0 px-4 py-1 bg-slate-900 text-white text-[10px] font-bold rounded-bl-xl">HPP Rp ${Math.round(totalHpp).toLocaleString()}</div>
                    <p class="text-[10px] font-bold text-indigo-500 mb-1 uppercase tracking-widest">${m.cat}</p>
                    <h3 class="text-xl font-black text-slate-800 mb-4">${m.name}</h3>
                    <div class="mb-4">${recipeList}</div>
                    <div class="flex justify-between items-end">
                        <div><p class="text-[10px] font-bold text-slate-400">MARGIN</p><p class="text-2xl font-black ${margin > 60 ? 'text-emerald-500' : 'text-amber-500'}">${margin.toFixed(1)}%</p></div>
                        <div class="text-right"><p class="text-[10px] font-bold text-slate-400">HARGA JUAL</p><p class="text-2xl font-black text-slate-800">Rp ${m.price.toLocaleString()}</p></div>
                    </div>
                </div>`;
        });
        document.getElementById('total-menu-count').innerText = dbMenu.length;
    }

    function renderSales() {
        const container = document.getElementById('sales-container');
        for (let bulan in salesData) {
            let rows = "";
            let totalBulan = 0;
            salesData[bulan].forEach(s => {
                totalBulan += s.total;
                rows += `<tr class="border-b text-xs">
                    <td class="p-3 font-bold">${s.menu}</td>
                    <td class="p-3 text-center">${s.qty}</td>
                    <td class="p-3 text-right">Rp ${s.total.toLocaleString()}</td>
                </tr>`;
            });

            container.innerHTML += `
                <div class="glass p-8 rounded-[2rem]">
                    <h3 class="font-black text-xl mb-6 text-slate-800">${bulan}</h3>
                    <table class="w-full mb-4">
                        <thead class="bg-slate-50 text-[10px] font-bold text-slate-400">
                            <tr><th class="p-3 text-left">MENU</th><th class="p-3">QTY</th><th class="p-3 text-right">SUBTOTAL</th></tr>
                        </thead>
                        <tbody>${rows}</tbody>
                    </table>
                    <div class="bg-slate-900 p-4 rounded-2xl text-white flex justify-between">
                        <span class="font-bold uppercase text-xs">Total Omzet</span>
                        <span class="font-black">Rp ${totalBulan.toLocaleString()}</span>
                    </div>
                </div>`;
        }
    }

    function showTab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('tab-' + id).classList.remove('hidden');
        document.getElementById('btn-' + id).classList.add('active');
    }

    renderBahan();
    renderMenu();
    renderSales();
</script>
</body>
</html>
