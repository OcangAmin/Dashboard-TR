<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuan Rumah Coffee - Pro Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; color: #1e293b; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-btn.active { border-bottom: 3px solid #ea580c; color: #ea580c; font-weight: 700; }
        .custom-scroll::-webkit-scrollbar { height: 4px; width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .card { background: white; border-radius: 1.25rem; border: 1px solid #e2e8f0; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        input[type="number"] { outline: none; transition: all 0.2s; }
        input[type="number"]:focus { border-color: #ea580c; ring: 2px; ring-color: #ffedd5; }
    </style>
</head>
<body class="pb-10">

    <header class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 md:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex items-center gap-3">
                    <div class="bg-orange-600 w-10 h-10 rounded-xl flex items-center justify-center shadow-lg shadow-orange-200">
                        <span class="text-white font-black text-lg">T</span>
                    </div>
                    <div>
                        <h1 class="font-extrabold text-xl leading-none">Tuan Rumah</h1>
                        <span class="text-[10px] text-slate-500 font-bold tracking-widest uppercase">Coffee Management</span>
                    </div>
                </div>
                <div class="hidden md:block">
                    <span class="text-xs font-bold text-slate-400 block uppercase">Revenue Period</span>
                    <span class="text-lg font-black text-emerald-600">Rp 101.033.000</span>
                </div>
            </div>

            <div class="flex gap-6 overflow-x-auto custom-scroll border-t">
                <button onclick="openTab(event, 'tab-dashboard')" class="tab-btn active py-4 text-sm font-semibold whitespace-nowrap transition-all">Overview</button>
                <button onclick="openTab(event, 'tab-menu')" class="tab-btn py-4 text-sm font-semibold whitespace-nowrap transition-all">Menu & HPP</button>
                <button onclick="openTab(event, 'tab-ingredients')" class="tab-btn py-4 text-sm font-semibold whitespace-nowrap transition-all">Bahan Baku</button>
                <button onclick="openTab(event, 'tab-sales')" class="tab-btn py-4 text-sm font-semibold whitespace-nowrap transition-all">Rekap Penjualan</button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 md:px-8 mt-8">
        
        <section id="tab-dashboard" class="tab-content active animate-in fade-in duration-500">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="card p-6 border-l-4 border-l-orange-500">
                    <h3 class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">Top Performer</h3>
                    <p class="text-2xl font-black text-slate-800">Tuan Rumah Ice</p>
                    <p class="text-sm text-slate-500 mt-1">757 Cups Terjual</p>
                </div>
                <div class="card p-6 border-l-4 border-l-emerald-500">
                    <h3 class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">Gross Revenue</h3>
                    <p class="text-2xl font-black text-emerald-600">Rp 101.033.000</p>
                    <p class="text-sm text-slate-500 mt-1">Periode Des 2025</p>
                </div>
                <div class="card p-6 border-l-4 border-l-blue-500">
                    <h3 class="text-slate-400 text-xs font-bold uppercase tracking-wider mb-2">Total Volume</h3>
                    <p class="text-2xl font-black text-slate-800">4.381 Cups</p>
                    <p class="text-sm text-slate-500 mt-1">Total seluruh kategori</p>
                </div>
            </div>

            <div class="card p-8">
                <h3 class="font-bold text-lg mb-6">Revenue Berdasarkan Kategori</h3>
                <div class="space-y-4">
                    <div class="relative pt-1">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs font-bold inline-block py-1 px-2 uppercase rounded-full text-orange-600 bg-orange-100">Ice Coffee Series</span>
                            <span class="text-xs font-bold text-slate-600">Rp 50.695.000 (50.1%)</span>
                        </div>
                        <div class="overflow-hidden h-2 text-xs flex rounded bg-slate-100"><div style="width:50%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-orange-500"></div></div>
                    </div>
                    <div class="relative pt-1">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-xs font-bold inline-block py-1 px-2 uppercase rounded-full text-blue-600 bg-blue-100">Non-Coffee Series</span>
                            <span class="text-xs font-bold text-slate-600">Rp 32.585.000 (32.2%)</span>
                        </div>
                        <div class="overflow-hidden h-2 text-xs flex rounded bg-slate-100"><div style="width:32%" class="shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"></div></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="tab-menu" class="tab-content">
            <div class="flex flex-col md:flex-row justify-between gap-4 mb-6">
                <h2 class="text-2xl font-black">Recipe & HPP Analysis</h2>
                <div class="flex gap-2 overflow-x-auto custom-scroll" id="menu-filters"></div>
            </div>
            <div class="card overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead class="bg-slate-50 border-b border-slate-100">
                            <tr>
                                <th class="p-4 text-xs font-bold text-slate-400 uppercase">Menu</th>
                                <th class="p-4 text-xs font-bold text-slate-400 uppercase text-right">Retail</th>
                                <th class="p-4 text-xs font-bold text-slate-400 uppercase text-right">HPP</th>
                                <th class="p-4 text-xs font-bold text-slate-400 uppercase text-right">Margin (Rp)</th>
                                <th class="p-4 text-xs font-bold text-slate-400 uppercase text-center">Margin (%)</th>
                            </tr>
                        </thead>
                        <tbody id="menu-table-body" class="divide-y divide-slate-50"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="tab-ingredients" class="tab-content">
            <div class="mb-6">
                <h2 class="text-2xl font-black">Inventory Master</h2>
                <p class="text-slate-500 text-sm">Sesuaikan harga beli bahan baku (per ml/gram/pcs) di bawah ini.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="ingredients-grid"></div>
        </section>

        <section id="tab-sales" class="tab-content">
            <div class="mb-6 flex justify-between items-center">
                <h2 class="text-2xl font-black text-slate-800">Sales Recap Report</h2>
                <span class="bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider">Verified</span>
            </div>
            <div class="card overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead class="bg-slate-800 text-white">
                            <tr>
                                <th class="p-4 text-xs font-bold uppercase">Category</th>
                                <th class="p-4 text-xs font-bold uppercase">Menu</th>
                                <th class="p-4 text-xs font-bold uppercase text-center">Qty Sold</th>
                                <th class="p-4 text-xs font-bold uppercase text-right">Revenue</th>
                            </tr>
                        </thead>
                        <tbody id="sales-table-body" class="divide-y divide-slate-100 text-sm"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script>
        // DATA BAHAN BAKU
        const ingredients = {
            "KOPI": {
                "kaks": { name: "Arabika Kaks", p: 240, u: "g" },
                "diks": { name: "Arabika Diks", p: 280, u: "g" }
            },
            "SYRUP": {
                "monin": { name: "Monin Syrup", p: 215, u: "ml" },
                "caramel_sauce": { name: "Caramel Sauce", p: 150, u: "ml" },
                "straw_sauce": { name: "Straw Sauce", p: 150, u: "ml" }
            },
            "DAIRY": {
                "uht": { name: "UHT Diamond", p: 21, u: "ml" },
                "oat": { name: "Oatside", p: 45, u: "ml" },
                "evap": { name: "Susu Evap", p: 32, u: "ml" },
                "skm": { name: "SKM", p: 12, u: "ml" },
                "creamer": { name: "MaxCreamer", p: 48, u: "g" },
                "cheese": { name: "Cheese Cream", p: 150, u: "g" },
                "yakult": { name: "Yakult", p: 2800, u: "pcs" },
                "hydro": { name: "Hydro Coco", p: 25, u: "ml" }
            },
            "POWDER": {
                "pow_std": { name: "Powder Reg", p: 120, u: "g" },
                "pow_matcha": { name: "Powder Matcha", p: 180, u: "g" },
                "pow_vanilla": { name: "Powder Vanilla", p: 120, u: "g" }
            },
            "OTHERS": {
                "aren": { name: "Gula Aren", p: 35, u: "ml" },
                "sugar": { name: "Simple Sugar", p: 10, u: "ml" },
                "skippy": { name: "Skippy/Spread", p: 250, u: "g" },
                "tea": { name: "Tea Extract", p: 15, u: "ml" },
                "sprite": { name: "Sprite", p: 15, u: "ml" },
                "lotus": { name: "Lotus Biskuit", p: 2000, u: "pcs" },
                "nipis": { name: "Jeruk Nipis", p: 100, u: "ml" },
                "selasih": { name: "Biji Selasih", p: 20, u: "g" },
                "pkg": { name: "Cup/Lid/Straw", p: 1200, u: "set" }
            }
        };

        // DATA MENU
        const menuData = [
            { name: "Kopi Susu Ice", cat: "Ice Coffee", price: 22000, r: [{i:"skm",q:20},{i:"creamer",q:15},{i:"evap",q:10},{i:"kaks",q:30},{i:"uht",q:70},{i:"pkg",q:1}] },
            { name: "Tuan Rumah Ice", cat: "Ice Coffee", price: 25000, r: [{i:"aren",q:25},{i:"creamer",q:25},{i:"kaks",q:30},{i:"uht",q:100},{i:"pkg",q:1}] },
            { name: "Tiramisu Ice", cat: "Ice Coffee", price: 28000, r: [{i:"monin",q:20},{i:"skm",q:10},{i:"creamer",q:15},{i:"kaks",q:30},{i:"uht",q:100},{i:"cheese",q:20},{i:"pkg",q:1}] },
            { name: "Banana Coffee", cat: "Ice Coffee", price: 25000, r: [{i:"monin",q:20},{i:"skm",q:10},{i:"creamer",q:15},{i:"kaks",q:30},{i:"uht",q:100},{i:"pkg",q:1}] },
            { name: "Biscoff Ice", cat: "Ice Coffee", price: 27000, r: [{i:"skippy",q:15},{i:"skm",q:10},{i:"monin",q:10},{i:"creamer",q:10},{i:"kaks",q:30},{i:"uht",q:100},{i:"lotus",q:1},{i:"pkg",q:1}] },
            { name: "Pandan Ice", cat: "Ice Coffee", price: 28000, r: [{i:"monin",q:20},{i:"skm",q:10},{i:"evap",q:10},{i:"creamer",q:20},{i:"kaks",q:30},{i:"oat",q:100},{i:"pkg",q:1}] },
            { name: "Berry Cano", cat: "Americano Series", price: 25000, r: [{i:"monin",q:20},{i:"sugar",q:10},{i:"diks",q:30},{i:"pkg",q:1}] },
            { name: "Apple Cano", cat: "Americano Series", price: 25000, r: [{i:"monin",q:20},{i:"sugar",q:10},{i:"diks",q:30},{i:"pkg",q:1}] },
            { name: "Melon Cano", cat: "Americano Series", price: 25000, r: [{i:"monin",q:20},{i:"sugar",q:10},{i:"diks",q:30},{i:"pkg",q:1}] },
            { name: "Avocado Ice", cat: "Non Coffee", price: 23000, r: [{i:"skm",q:10},{i:"pow_std",q:20},{i:"creamer",q:15},{i:"uht",q:100},{i:"pkg",q:1}] },
            { name: "Matcha Latte", cat: "Non Coffee", price: 28000, r: [{i:"pow_matcha",q:20},{i:"skm",q:15},{i:"creamer",q:10},{i:"uht",q:110},{i:"pkg",q:1}] },
            { name: "Magic Hot", cat: "Specialty", price: 28000, r: [{i:"diks",q:36},{i:"oat",q:120}] },
            { name: "Yakult Series", cat: "Non Coffee", price: 23000, r: [{i:"monin",q:15},{i:"yakult",q:1},{i:"sprite",q:110},{i:"pkg",q:1}] }
        ];

        // DATA SALES RECAP (Dari Input Anda)
        const salesData = [
            { c: "ADDITIONAL", m: "Air Mineral", q: 317, r: 2508000 },
            { c: "AMERICANO", m: "Beerycano Ice", q: 62, r: 1550000 },
            { c: "COFFEE", m: "Americano Ice", q: 138, r: 3036000 },
            { c: "ICE COFFEE", m: "Tuan Rumah Ice", q: 757, r: 18925000 },
            { c: "ICE COFFEE", m: "Pandan Ice", q: 370, r: 10360000 },
            { c: "ICE COFFEE", m: "Butterscotch Ice", q: 186, r: 5208000 },
            { c: "NON COFFEE", m: "Matcha Latte", q: 327, r: 9156000 },
            { c: "NON COFFEE", m: "Chocolate Ice", q: 267, r: 6675000 }
        ];

        let currentCatFilter = 'all';

        function openTab(evt, tabName) {
            document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
            document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        function getIngPrice(id) {
            for (const c in ingredients) { if (ingredients[c][id]) return ingredients[c][id].p; } return 0;
        }

        function renderIngredients() {
            const grid = document.getElementById('ingredients-grid');
            grid.innerHTML = '';
            for (const cat in ingredients) {
                let card = `<div class="card p-6"><h3 class="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">${cat}</h3>`;
                for (const key in ingredients[cat]) {
                    const itm = ingredients[cat][key];
                    card += `
                        <div class="flex justify-between items-center mb-3">
                            <span class="text-sm font-semibold">${itm.name}</span>
                            <div class="flex items-center gap-2">
                                <span class="text-[10px] text-slate-400">Rp</span>
                                <input type="number" value="${itm.p}" onchange="updatePrice('${cat}','${key}',this.value)" 
                                class="w-20 border rounded-lg px-2 py-1 text-sm text-right font-bold bg-slate-50">
                            </div>
                        </div>`;
                }
                grid.innerHTML += card + `</div>`;
            }
        }

        function updatePrice(c, k, v) { ingredients[c][k].p = parseFloat(v); renderMenu(); }

        function renderMenu() {
            const body = document.getElementById('menu-table-body');
            body.innerHTML = '';
            const filtered = currentCatFilter === 'all' ? menuData : menuData.filter(m => m.cat === currentCatFilter);
            
            filtered.forEach(m => {
                let hpp = 0;
                m.r.forEach(rcp => { hpp += (getIngPrice(rcp.i) * rcp.q); });
                const profit = m.price - hpp;
                const margin = ((profit / m.price) * 100).toFixed(0);

                body.innerHTML += `
                    <tr class="hover:bg-slate-50 transition-all">
                        <td class="p-4 font-bold">${m.name}<br><span class="text-[9px] text-slate-400 uppercase">${m.cat}</span></td>
                        <td class="p-4 text-right font-semibold">Rp ${m.price.toLocaleString()}</td>
                        <td class="p-4 text-right font-bold text-orange-600">Rp ${Math.round(hpp).toLocaleString()}</td>
                        <td class="p-4 text-right font-bold text-slate-700">Rp ${Math.round(profit).toLocaleString()}</td>
                        <td class="p-4 text-center"><span class="bg-slate-100 text-[10px] font-black px-2 py-1 rounded-full">${margin}%</span></td>
                    </tr>`;
            });
        }

        function renderSales() {
            const body = document.getElementById('sales-table-body');
            body.innerHTML = salesData.map(s => `
                <tr class="hover:bg-slate-50">
                    <td class="p-4 font-bold text-slate-400">${s.c}</td>
                    <td class="p-4 font-bold">${s.m}</td>
                    <td class="p-4 text-center font-bold text-blue-600">${s.q}</td>
                    <td class="p-4 text-right font-black">Rp ${s.r.toLocaleString()}</td>
                </tr>`).join('');
        }

        function renderMenuFilters() {
            const cats = ['all', ...new Set(menuData.map(m => m.cat))];
            document.getElementById('menu-filters').innerHTML = cats.map(c => `
                <button onclick="currentCatFilter='${c}'; renderMenu();" 
                class="px-4 py-1.5 rounded-full border text-xs font-bold transition-all hover:bg-slate-100 uppercase whitespace-nowrap">
                    ${c}
                </button>`).join('');
        }

        // Initialize
        renderIngredients();
        renderMenu();
        renderSales();
        renderMenuFilters();
    </script>
</body>
</html>
