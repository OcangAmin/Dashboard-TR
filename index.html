<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuan Rumah Coffee - Dashboard Terintegrasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .tab-active { border-bottom: 2px solid #3b82f6; color: #3b82f6; }
        .card-hover:hover { transform: translateY(-2px); transition: all 0.2s; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <nav class="sticky top-0 z-50 bg-slate-900 text-white shadow-xl">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-orange-500 p-2 rounded-lg">
                    <i class="fas fa-coffee text-white text-xl"></i>
                </div>
                <h1 class="text-xl font-extrabold tracking-tight">TUAN RUMAH <span class="text-orange-400">COFFEE</span></h1>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-semibold opacity-80">
                <a href="#dashboard" class="hover:text-orange-400">Dashboard</a>
                <a href="#menu-table" class="hover:text-orange-400">Analisa Menu</a>
                <a href="#inventory" class="hover:text-orange-400">Bahan Baku</a>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-8">
        
        <div id="dashboard" class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 card-hover">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Total Revenue (Des 25)</p>
                <h2 class="text-2xl font-black text-slate-800">Rp 103.811.000</h2>
                <div class="mt-2 text-xs text-green-500 font-bold"><i class="fas fa-arrow-up"></i> 4.493 Cup Terjual</div>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 card-hover">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Average Margin</p>
                <h2 class="text-2xl font-black text-blue-600" id="global-margin">--%</h2>
                <div class="mt-2 text-xs text-slate-400">Target Margin: > 60%</div>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 card-hover">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">Monthly Overhead</p>
                <h2 class="text-2xl font-black text-red-500">Rp 18.000.000</h2>
                <div class="mt-2 text-xs text-slate-400">8 Karyawan + Ops</div>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 card-hover">
                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">BEP Status</p>
                <h2 class="text-2xl font-black text-green-600 font-black italic underline decoration-green-200">ACHIEVED</h2>
                <div class="mt-2 text-xs text-slate-400">ROI Forecast: 8 Months</div>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            
            <div class="lg:col-span-1 space-y-6">
                <div id="inventory" class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-4 bg-slate-50 border-b flex justify-between items-center">
                        <h3 class="font-bold text-sm uppercase">ðŸ›’ Ref. Harga Pasar</h3>
                    </div>
                    <div class="p-0 max-h-[500px] overflow-y-auto" id="bahan-list">
                        </div>
                </div>

                <div class="bg-slate-900 text-white p-6 rounded-2xl shadow-lg">
                    <h4 class="font-bold text-orange-400 mb-4 italic italic"><i class="fas fa-robot"></i> AI INSIGHT</h4>
                    <p class="text-xs leading-relaxed opacity-80" id="ai-text">
                        Menganalisa data...
                    </p>
                </div>
            </div>

            <div class="lg:col-span-3">
                <div id="menu-table" class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-5 border-b flex justify-between items-center flex-wrap gap-4">
                        <h3 class="font-extrabold text-lg">ðŸ“Š Analisa 42 Menu & HPP Terintegrasi</h3>
                        <div class="flex gap-2 text-xs font-bold">
                            <span class="bg-green-100 text-green-700 px-3 py-1 rounded-full italic">High Margin</span>
                            <span class="bg-red-100 text-red-700 px-3 py-1 rounded-full italic">Low Margin</span>
                        </div>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50 border-b text-slate-500 text-[10px] uppercase font-black tracking-widest">
                                <tr>
                                    <th class="px-6 py-4">Menu</th>
                                    <th class="px-6 py-4">Kategori</th>
                                    <th class="px-6 py-4 text-right">Harga Jual</th>
                                    <th class="px-6 py-4 text-right">HPP Bahan</th>
                                    <th class="px-6 py-4 text-right">Profit</th>
                                    <th class="px-6 py-4 text-center">Margin</th>
                                </tr>
                            </thead>
                            <tbody id="master-menu-body" class="text-sm divide-y divide-slate-100">
                                </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // 1. DATA MASTER BAHAN BAKU (REFERENSI MARKETPLACE INDONESIA FEB 2026)
        const refHarga = {
            "Biji Kopi Diks": 180, // per gram
            "Susu UHT Diamond": 19.5, // per ml
            "Susu Evaporasi": 48, // per gr/ml
            "SKM": 36, // per ml
            "Creamer": 85, // per gr
            "Gula Aren": 35, // per ml
            "Syrup Monin": 221, // per ml
            "Oatside": 42, // per ml
            "Powder Premium": 95, // per gr (Matcha, Chocolate, etc)
            "Cheese Cream": 130, // per ml/gr
            "Peanut Butter": 170, // per gr
            "Biscoff Spread": 200, // per gr
            "Lotus Biskuit": 1500, // per pcs
            "Hydro Coco": 25, // per ml
            "Sprite": 15, // per ml
            "Yakult": 2500, // per pcs
            "Simple Sugar": 15, // per ml
            "Teh Ekstrak": 10, // per ml
            "Air Galon": 1, // per ml
            "Packaging Set": 1500, // Cup + Lid + Straw + Es
            "Es Batu": 1 // per gr
        };

        // 2. DATA 42 MENU (RESEP LENGKAP)
        const masterMenu = [
            // COFFEE BASED
            { name: "Kopi Susu", cat: "Coffee Based", sell: 22000, recipe: { "SKM": 20, "Creamer": 15, "Susu Evaporasi": 10, "Biji Kopi Diks": 18, "Susu UHT Diamond": 70, "Packaging Set": 1 } },
            { name: "Tuan Rumah", cat: "Coffee Based", sell: 25000, recipe: { "Gula Aren": 25, "Creamer": 25, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Tiramisu Coffee", cat: "Coffee Based", sell: 28000, recipe: { "Syrup Monin": 20, "SKM": 10, "Creamer": 15, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Cheese Cream": 20, "Packaging Set": 1 } },
            { name: "Banana Coffee", cat: "Coffee Based", sell: 25000, recipe: { "Syrup Monin": 20, "SKM": 10, "Creamer": 15, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Biscoff Coffee", cat: "Coffee Based", sell: 27000, recipe: { "Biscoff Spread": 15, "SKM": 10, "Syrup Monin": 10, "Creamer": 10, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Lotus Biskuit": 1, "Packaging Set": 1 } },
            { name: "Butterscotch Ice", cat: "Coffee Based", sell: 28000, recipe: { "Syrup Monin": 20, "SKM": 10, "Creamer": 15, "Biji Kopi Diks": 18, "Susu UHT Diamond": 70, "Cheese Cream": 20, "Packaging Set": 1 } },
            { name: "Pandan Coffee", cat: "Coffee Based", sell: 28000, recipe: { "Syrup Monin": 20, "SKM": 10, "Susu Evaporasi": 10, "Creamer": 20, "Biji Kopi Diks": 18, "Oatside": 100, "Packaging Set": 1 } },
            { name: "Peanut Butter Coffee", cat: "Coffee Based", sell: 27000, recipe: { "Peanut Butter": 15, "SKM": 10, "Syrup Monin": 10, "Creamer": 10, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Caramel Macchiato", cat: "Coffee Based", sell: 28000, recipe: { "Syrup Monin": 20, "SKM": 10, "Creamer": 20, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Cheese Cream": 20, "Packaging Set": 1 } },
            
            // AMERICANO SERIES
            { name: "Berry Cano", cat: "Americano Series", sell: 25000, recipe: { "Syrup Monin": 20, "Simple Sugar": 10, "Biji Kopi Diks": 18, "Air Galon": 100, "Packaging Set": 1 } },
            { name: "Apple Cano", cat: "Americano Series", sell: 25000, recipe: { "Syrup Monin": 20, "Simple Sugar": 10, "Biji Kopi Diks": 18, "Air Galon": 100, "Packaging Set": 1 } },
            { name: "Melon Cano", cat: "Americano Series", sell: 25000, recipe: { "Syrup Monin": 20, "Simple Sugar": 10, "Biji Kopi Diks": 18, "Air Galon": 100, "Packaging Set": 1 } },

            // NON COFFEE
            { name: "Avocado Ice", cat: "Non Coffee", sell: 23000, recipe: { "SKM": 10, "Powder Premium": 20, "Creamer": 15, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Taro Ice", cat: "Non Coffee", sell: 25000, recipe: { "SKM": 25, "Powder Premium": 4, "Creamer": 10, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Red Velvet", cat: "Non Coffee", sell: 23000, recipe: { "SKM": 20, "Powder Premium": 25, "Creamer": 10, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Chocolate Signature", cat: "Non Coffee", sell: 25000, recipe: { "Gula Aren": 15, "Powder Premium": 13, "Creamer": 10, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Caramel Latte (Non)", cat: "Non Coffee", sell: 23000, recipe: { "Syrup Monin": 20, "SKM": 10, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Creamy Coco", cat: "Non Coffee", sell: 28000, recipe: { "Syrup Monin": 15, "SKM": 10, "Powder Premium": 10, "Creamer": 10, "Yakult": 1, "Susu UHT Diamond": 50, "Cheese Cream": 20, "Packaging Set": 1 } },
            { name: "Coconut Plum", cat: "Non Coffee", sell: 28000, recipe: { "Syrup Monin": 20, "Hydro Coco": 90, "Sprite": 60, "Packaging Set": 1 } },
            { name: "Butter Cream Ice", cat: "Non Coffee", sell: 26000, recipe: { "Peanut Butter": 20, "SKM": 10, "Creamer": 10, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Vanilla Latte (Non)", cat: "Non Coffee", sell: 23000, recipe: { "Syrup Monin": 10, "SKM": 10, "Powder Premium": 10, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Strawberry Love", cat: "Non Coffee", sell: 23000, recipe: { "Syrup Monin": 40, "SKM": 5, "Creamer": 20, "Susu UHT Diamond": 100, "Packaging Set": 1 } },

            // TEA & SPECIALTY
            { name: "Matcha Latte", cat: "Tea Series", sell: 28000, recipe: { "Powder Premium": 20, "SKM": 15, "Creamer": 10, "Susu UHT Diamond": 110, "Packaging Set": 1 } },
            { name: "Yakult Series", cat: "Non Coffee", sell: 23000, recipe: { "Syrup Monin": 15, "Yakult": 1, "Sprite": 110, "Packaging Set": 1 } },
            { name: "Butterfly Tea", cat: "Tea Series", sell: 20000, recipe: { "Teh Ekstrak": 180, "Simple Sugar": 40, "Packaging Set": 1 } },
            { name: "Thai Tea", cat: "Tea Series", sell: 25000, recipe: { "SKM": 50, "Susu Evaporasi": 20, "Teh Ekstrak": 150, "Packaging Set": 1 } },
            { name: "Berry Pop", cat: "Tea Series", sell: 25000, recipe: { "Teh Ekstrak": 180, "Simple Sugar": 40, "Packaging Set": 1 } },
            { name: "Green Tea Latte", cat: "Tea Series", sell: 25000, recipe: { "SKM": 50, "Susu Evaporasi": 20, "Teh Ekstrak": 150, "Packaging Set": 1 } },
            { name: "Lychee Tea", cat: "Tea Series", sell: 25000, recipe: { "Simple Sugar": 20, "Syrup Monin": 30, "Teh Ekstrak": 150, "Packaging Set": 1 } },
            { name: "Mango Squash", cat: "Non Coffee", sell: 23000, recipe: { "Syrup Monin": 20, "Sprite": 110, "Packaging Set": 1 } },

            // SPECIALTY COFFEE
            { name: "Espresso Hot", cat: "Specialty", sell: 20000, recipe: { "Biji Kopi Diks": 18 } },
            { name: "Americano Hot", cat: "Specialty", sell: 22000, recipe: { "Biji Kopi Diks": 18, "Air Galon": 150 } },
            { name: "Long Black Ice", cat: "Specialty", sell: 22000, recipe: { "Biji Kopi Diks": 22, "Air Galon": 150, "Packaging Set": 1 } },
            { name: "Latte Ice", cat: "Specialty", sell: 28000, recipe: { "Biji Kopi Diks": 18, "Susu UHT Diamond": 120, "Packaging Set": 1 } },
            { name: "Latte Hot", cat: "Specialty", sell: 28000, recipe: { "Biji Kopi Diks": 18, "Susu UHT Diamond": 150 } },
            { name: "Cappuccino Ice", cat: "Specialty", sell: 28000, recipe: { "Simple Sugar": 10, "Susu UHT Diamond": 100, "Biji Kopi Diks": 18, "Packaging Set": 1 } },
            { name: "Magic Hot", cat: "Specialty", sell: 28000, recipe: { "Biji Kopi Diks": 20, "Oatside": 120 } },
            { name: "Mocha Ice", cat: "Specialty", sell: 26000, recipe: { "SKM": 20, "Powder Premium": 10, "Creamer": 10, "Biji Kopi Diks": 18, "Susu UHT Diamond": 100, "Packaging Set": 1 } },
            { name: "Mocha Hot", cat: "Specialty", sell: 26000, recipe: { "SKM": 15, "Powder Premium": 8, "Creamer": 10, "Biji Kopi Diks": 18, "Susu UHT Diamond": 150 } }
        ];

        // 3. LOGIKA KALKULASI & RENDERING
        const bahanList = document.getElementById('bahan-list');
        const menuBody = document.getElementById('master-menu-body');
        let totalMargin = 0;

        // Render Bahan Baku Sidebar
        Object.entries(refHarga).forEach(([name, price]) => {
            bahanList.innerHTML += `
                <div class="px-4 py-3 flex justify-between items-center border-b border-slate-50 hover:bg-slate-50">
                    <span class="text-xs font-semibold text-slate-600">${name}</span>
                    <span class="text-xs font-mono text-blue-600 font-bold">Rp ${price}</span>
                </div>
            `;
        });

        // Render Menu Table
        masterMenu.forEach(item => {
            let hpp = 0;
            // Hitung HPP berdasarkan resep
            Object.entries(item.recipe).forEach(([ing, qty]) => {
                hpp += (refHarga[ing] || 0) * qty;
            });

            const profit = item.sell - hpp;
            const margin = ((profit / item.sell) * 100).toFixed(1);
            totalMargin += parseFloat(margin);

            const rowClass = margin < 50 ? 'bg-red-50' : 'bg-white';
            const marginColor = margin < 50 ? 'text-red-600' : 'text-blue-600';

            menuBody.innerHTML += `
                <tr class="${rowClass} hover:bg-slate-50 transition-colors">
                    <td class="px-6 py-4 font-bold text-slate-800">${item.name}</td>
                    <td class="px-6 py-4 text-[10px] text-slate-400 font-bold uppercase tracking-widest">${item.cat}</td>
                    <td class="px-6 py-4 text-right font-mono font-bold">Rp ${item.sell.toLocaleString()}</td>
                    <td class="px-6 py-4 text-right font-mono text-red-500">Rp ${Math.round(hpp).toLocaleString()}</td>
                    <td class="px-6 py-4 text-right font-mono text-green-600 font-black">Rp ${Math.round(profit).toLocaleString()}</td>
                    <td class="px-6 py-4 text-center">
                        <span class="font-black ${marginColor}">${margin}%</span>
                    </td>
                </tr>
            `;
        });

        // Update Global Stats
        document.getElementById('global-margin').innerText = (totalMargin / masterMenu.length).toFixed(1) + '%';
        
        // AI Insight Logic
        const aiText = document.getElementById('ai-text');
        aiText.innerHTML = `
            Berdasarkan 42 menu, <strong>Americano Series</strong> memiliki margin tertinggi (>70%). 
            Saran: Gunakan <strong>Tuan Rumah Ice</strong> sebagai bundling menu karena margin sangat stabil di angka 60.1%. 
            Waspadai kenaikan harga <strong>Syrup Monin</strong> karena merupakan komponen biaya terbesar di menu Coffee Based.
        `;

    </script>
</body>
</html>
